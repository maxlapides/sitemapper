function displayTree(e){function t(e,n,i){if(e){n(e);var r=i(e);if(r)for(var o=r.length,a=0;o>a;a++)t(r[a],n,i)}}function n(){L.sort(function(e,t){return t.name.toLowerCase()<e.name.toLowerCase()?1:-1})}function i(e,t){var n=k,r,o,a,s;if(r){clearTimeout(r),o=d3.transform(I.attr("transform")),"left"===t||"right"===t?(a="left"===t?o.translate[0]+n:o.translate[0]-n,s=o.translate[1]):("up"===t||"down"===t)&&(a=o.translate[0],s="up"===t?o.translate[1]+n:o.translate[1]-n);var l=j.scale();I.transition().attr("transform","translate("+a+","+s+")scale("+l+")"),d3.select(e).select("g.node").attr("transform","translate("+a+","+s+")"),j.scale(j.scale()),j.translate([a,s]),r=setTimeout(function(){i(e,n,t)},50)}}function r(){I.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function o(e,t){b=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),I.selectAll("g.node").sort(function(e){return e.id!==b.id?1:-1});var n,i,r;f.length>1&&(y=L.links(f),n=I.selectAll("path.link").data(y,function(e){return e.target.id}).remove(),i=I.selectAll("g.node").data(f,function(e){return e.id}).filter(function(e){return e.id===b.id?!1:!0}).remove()),r=L.links(L.nodes(b.parent)),I.selectAll("path.link").filter(function(e){return e.target.id===b.id?!0:!1}).remove(),h=null}function a(){w=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(u).attr("class","node"),d3.select(u).select(".ghostCircle").attr("pointer-events",""),H(),null!==b&&(p(E),l(b),b=null)}function s(e){e._children&&(e.children=e._children,e.children.forEach(s),e._children=null)}function l(e){var t=j.scale(),n=-e.y0*t+O/2,i=-e.x0*t+S/2;d3.select("g").transition().duration(T).attr("transform","translate("+n+","+i+")scale("+t+")"),j.scale(t),j.translate([n,i])}function c(e){return e.children?(e._children=e.children,e.children=null):e._children&&(e.children=e._children,e._children=null),e}function d(e){d3.event.defaultPrevented||(e=c(e),p(e),l(e))}function p(e){var t=[1],n=function(e,i){i.children&&i.children.length>0&&(t.length<=e+1&&t.push(0),t[e+1]+=i.children.length,i.children.forEach(function(t){n(e+1,t)}))};n(0,E);var i=25*d3.max(t);L=L.size([i,O]),f=L.nodes(E).reverse(),y=L.links(f),f.forEach(function(e){e.y=10*e.depth*x});var r=I.selectAll("g.node").data(f,function(e){return e.id||(e.id=++_)}),o=r.enter().append("g").call(M).attr("class","node").attr("transform",function(){return"translate("+e.y0+","+e.x0+")"}).on("click",d);o.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return e._children?"lightsteelblue":"#fff"}),o.append("text").attr("x",function(e){return e.children||e._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),o.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){R(e)}).on("mouseout",function(e){P(e)}),r.select("text").attr("x",function(e){return e.children||e._children?-10:10}).attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).text(function(e){return e.name}),r.select("circle.nodeCircle").attr("r",4.5).style("fill",function(e){return e._children?"lightsteelblue":"#fff"});var a=r.transition().duration(T).attr("transform",function(e){return"translate("+e.y+","+e.x+")"});a.select("text").style("fill-opacity",1);var s=r.exit().transition().duration(T).attr("transform",function(){return"translate("+e.y+","+e.x+")"}).remove();s.select("circle").attr("r",0),s.select("text").style("fill-opacity",0);var l=I.selectAll("path.link").data(y,function(e){return e.target.id});l.enter().insert("path","g").attr("class","link").attr("d",function(){var t={x:e.x0,y:e.y0};return W({source:t,target:t})}),l.transition().duration(T).attr("d",W),l.exit().transition().duration(T).attr("d",function(){var t={x:e.x,y:e.y};return W({source:t,target:t})}).remove(),f.forEach(function(e){e.x0=e.x,e.y0=e.y})}var f,u,h,g,m,y,v=0,x=0,w=null,b=null,k=200,C=20,_=0,T=750,E,O=$("#tree-container").width(),S=600,L=d3.layout.tree().size([S,O]),W=d3.svg.diagonal().projection(function(e){return[e.y,e.x]});t(e,function(e){v++,x=Math.max(e.name.length,x)},function(e){return e.children&&e.children.length>0?e.children:null}),n();var j=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",r),A=d3.select("#tree-container").append("svg").attr("width",O).attr("height",S).attr("class","overlay").call(j),M=d3.behavior.drag().on("dragstart",function(e){e!==E&&(h=!0,f=L.nodes(e),d3.event.sourceEvent.stopPropagation())}).on("drag",function(e){if(e!==E){if(h&&(u=this,o(e,u)),g=d3.mouse($("svg").get(0)),g[0]<C)m=!0,i(this,"left");else if(g[0]>$("svg").width()-C)m=!0,i(this,"right");else if(g[1]<C)m=!0,i(this,"up");else if(g[1]>$("svg").height()-C)m=!0,i(this,"down");else try{clearTimeout(m)}catch(t){}e.x0+=d3.event.dy,e.y0+=d3.event.dx;var n=d3.select(this);n.attr("transform","translate("+e.y0+","+e.x0+")"),H()}}).on("dragend",function(e){if(e!==E)if(u=this,w){var t=b.parent.children.indexOf(b);t>-1&&b.parent.children.splice(t,1),"undefined"!=typeof w.children||"undefined"!=typeof w._children?"undefined"!=typeof w.children?w.children.push(b):w._children.push(b):(w.children=[],w.children.push(b)),s(w),n(),a()}else a()}),R=function(e){w=e,H()},P=function(){w=null,H()},H=function(){var e=[];null!==b&&null!==w&&(e=[{source:{x:w.y0,y:w.x0},target:{x:b.y0,y:b.x0}}]);var t=I.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},I=A.append("g");E=e,E.x0=S/2,E.y0=0,p(E),l(E)}!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n=document.createElement(e||"div"),i;for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-o),e),s=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return p[r]||(u.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",u.cssRules.length),p[r]=1),r}function i(e,t){var n=e.style,i,r;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<d.length;r++)if(i=d[r]+t,void 0!==n[i])return i;return void 0!==n[t]?t:void 0}function r(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function a(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){return"undefined"==typeof this?new l(e):void(this.opts=o(e||{},l.defaults,h))}function c(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}u.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,i){function o(){return r(n("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function a(e,a,c){t(p,t(r(o(),{rotation:360/i.lines*e+"deg",left:~~a}),t(r(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:c}),n("fill",{color:s(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l=i.length+i.width,c=2*l,d=2*-(i.width+i.length)+"px",p=r(o(),{position:"absolute",top:d,left:d}),f;if(i.shadow)for(f=1;f<=i.lines;f++)a(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=i.lines;f++)a(f);return t(e,p)},l.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var d=["webkit","Moz","ms","O"],p={},f,u=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},o(l.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,o=n.el=r(e(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),s=i.radius+i.length+i.width,l,c;if(t&&(t.insertBefore(o,t.firstChild||null),c=a(t),l=a(o),r(o,{left:("auto"==i.left?c.x-l.x+(t.offsetWidth>>1):parseInt(i.left,10)+s)+"px",top:("auto"==i.top?c.y-l.y+(t.offsetHeight>>1):parseInt(i.top,10)+s)+"px"})),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!f){var d=0,p=(i.lines-1)*(1-i.direction)/2,u,h=i.fps,g=h/i.speed,m=(1-i.opacity)/(g*i.trail/100),y=g/i.lines;!function v(){d++;for(var e=0;e<i.lines;e++)u=Math.max(1-(d+(i.lines-e)*y)%g*m,i.opacity),n.opacity(o,e*i.direction+p,u,i);n.timeout=n.el&&setTimeout(v,~~(1e3/h))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function a(t,n){return r(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var l=0,c=(o.lines-1)*(1-o.direction)/2,d;l<o.lines;l++)d=r(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:f&&n(o.opacity,o.trail,c+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(d,r(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(d,a(s(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var g=r(e("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?c():f=i(g,"animation"),l}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,i){return this.each(function(){var r=e(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),n!==!1&&(n=e.extend({color:i||r.css("color")},e.fn.spin.presets[n]||n),o.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e,t,n,i){"use strict";var r=n("html"),o=n(e),a=n(t),s=n.fancybox=function(){s.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==i,p=function(e){return e&&e.hasOwnProperty&&e instanceof n},f=function(e){return e&&"string"===n.type(e)},u=function(e){return f(e)&&e.indexOf("%")>0},h=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},g=function(e,t){var n=parseInt(e,10)||0;return t&&u(e)&&(n=s.getViewport()[t]/100*n),Math.ceil(n)},m=function(e,t){return g(e,t)+"px"};n.extend(s,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(n.isPlainObject(t)||(t={}),!1!==s.close(!0))?(n.isArray(e)||(e=p(e)?n(e).get():[e]),n.each(e,function(r,o){var a={},l,c,d,u,h,g,m;"object"===n.type(o)&&(o.nodeType&&(o=n(o)),p(o)?(a={href:o.data("fancybox-href")||o.attr("href"),title:o.data("fancybox-title")||o.attr("title"),isDom:!0,element:o},n.metadata&&n.extend(!0,a,o.metadata())):a=o),l=t.href||a.href||(f(o)?o:null),c=t.title!==i?t.title:a.title||"",d=t.content||a.content,u=d?"html":t.type||a.type,!u&&a.isDom&&(u=o.data("fancybox-type"),u||(h=o.prop("class").match(/fancybox\.(\w+)/),u=h?h[1]:null)),f(l)&&(u||(s.isImage(l)?u="image":s.isSWF(l)?u="swf":"#"===l.charAt(0)?u="inline":f(o)&&(u="html",d=o)),"ajax"===u&&(g=l.split(/\s+/,2),l=g.shift(),m=g.shift())),d||("inline"===u?l?d=n(f(l)?l.replace(/.*(?=#[^\s]+$)/,""):l):a.isDom&&(d=o):"html"===u?d=l:u||l||!a.isDom||(u="inline",d=o)),n.extend(a,{href:l,type:u,content:d,title:c,selector:m}),e[r]=a}),s.opts=n.extend(!0,{},s.defaults,t),t.keys!==i&&(s.opts.keys=t.keys?n.extend({},s.defaults.keys,t.keys):!1),s.group=e,s._start(s.opts.index)):void 0},cancel:function(){var e=s.coming;e&&!1!==s.trigger("onCancel")&&(s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),s.coming=null,s.current||s._afterZoomOut(e))},close:function(e){s.cancel(),!1!==s.trigger("beforeClose")&&(s.unbindEvents(),s.isActive&&(s.isOpen&&e!==!0?(s.isOpen=s.isOpened=!1,s.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0,!0).removeClass("fancybox-opened"),s.transitions[s.current.closeMethod]()):(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),s._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(s.player.timer)},n=function(){t(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},i=function(){t(),a.unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")},r=function(){s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,a.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),s.trigger("onPlayStart"))};e===!0||!s.player.isActive&&e!==!1?r():i()},next:function(e){var t=s.current;t&&(f(e)||(e=t.direction.next),s.jumpto(t.index+1,e,"next"))},prev:function(e){var t=s.current;t&&(f(e)||(e=t.direction.prev),s.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var r=s.current;r&&(e=g(e),s.direction=t||r.direction[e>=r.index?"next":"prev"],s.router=n||"jumpto",r.loop&&(0>e&&(e=r.group.length+e%r.group.length),e%=r.group.length),r.group[e]!==i&&(s.cancel(),s._start(e)))},reposition:function(e,t){var i=s.current,r=i?i.wrap:null,o;r&&(o=s._getPosition(t),e&&"scroll"===e.type?(delete o.position,r.stop(!0,!0).animate(o,200)):(r.css(o),i.pos=n.extend({},i.dim,o)))},update:function(e){var t=e&&e.type,n=!t||"orientationchange"===t;n&&(clearTimeout(c),c=null),s.isOpen&&!c&&(c=setTimeout(function(){var i=s.current;i&&!s.isClosing&&(s.wrap.removeClass("fancybox-tmp"),(n||"load"===t||"resize"===t&&i.autoResize)&&s._setDimension(),"scroll"===t&&i.canShrink||s.reposition(e),s.trigger("onUpdate"),c=null)},n&&!d?0:300))},toggle:function(e){s.isOpen&&(s.current.fitToView="boolean"===n.type(e)?e:!s.current.fitToView,d&&(s.wrap.removeAttr("style").addClass("fancybox-tmp"),s.trigger("onUpdate")),s.update())},hideLoading:function(){a.unbind(".loading"),n("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading(),e=n('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body"),a.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),s.cancel())}),s.defaults.fixed||(t=s.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=s.current&&s.current.locked||!1,n={x:o.scrollLeft(),y:o.scrollTop()};return t?(n.w=t[0].clientWidth,n.h=t[0].clientHeight):(n.w=d&&e.innerWidth?e.innerWidth:o.width(),n.h=d&&e.innerHeight?e.innerHeight:o.height()),n},unbindEvents:function(){s.wrap&&p(s.wrap)&&s.wrap.unbind(".fb"),a.unbind(".fb"),o.unbind(".fb")},bindEvents:function(){var e=s.current,t;e&&(o.bind("orientationchange.fb"+(d?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),s.update),t=e.keys,t&&a.bind("keydown.fb",function(r){var o=r.which||r.keyCode,a=r.target||r.srcElement;return 27===o&&s.coming?!1:void(r.ctrlKey||r.altKey||r.shiftKey||r.metaKey||a&&(a.type||n(a).is("[contenteditable]"))||n.each(t,function(t,a){return e.group.length>1&&a[o]!==i?(s[t](a[o]),r.preventDefault(),!1):n.inArray(o,a)>-1?(s[t](),r.preventDefault(),!1):void 0}))}),n.fn.mousewheel&&e.mouseWheel&&s.wrap.bind("mousewheel.fb",function(t,i,r,o){for(var a=t.target||null,l=n(a),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=h(l[0]),l=n(l).parent();0===i||c||s.group.length>1&&!e.canShrink&&(o>0||r>0?s.prev(o>0?"down":"left"):(0>o||0>r)&&s.next(0>o?"up":"right"),t.preventDefault())}))},trigger:function(e,t){var i,r=t||s.coming||s.current;if(r){if(n.isFunction(r[e])&&(i=r[e].apply(r,Array.prototype.slice.call(arguments,1))),i===!1)return!1;r.helpers&&n.each(r.helpers,function(t,i){i&&s.helpers[t]&&n.isFunction(s.helpers[t][e])&&s.helpers[t][e](n.extend(!0,{},s.helpers[t].defaults,i),r)}),a.trigger(e)}},isImage:function(e){return f(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return f(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t={},i,r,o,a,l;if(e=g(e),i=s.group[e]||null,!i)return!1;if(t=n.extend(!0,{},s.opts,i),a=t.margin,l=t.padding,"number"===n.type(a)&&(t.margin=[a,a,a,a]),"number"===n.type(l)&&(t.padding=[l,l,l,l]),t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=s.group,t.index=e,s.coming=t,!1===s.trigger("beforeLoad"))return void(s.coming=null);if(o=t.type,r=t.href,!o)return s.coming=null,s.current&&s.router&&"jumpto"!==s.router?(s.current.index=e,s[s.router](s.direction)):!1;if(s.isActive=!0,("image"===o||"swf"===o)&&(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),"image"===o&&(t.aspectRatio=!0),"iframe"===o&&d&&(t.scrolling="scroll"),t.wrap=n(t.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+o+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),n.extend(t,{skin:n(".fancybox-skin",t.wrap),outer:n(".fancybox-outer",t.wrap),inner:n(".fancybox-inner",t.wrap)}),n.each(["Top","Right","Bottom","Left"],function(e,n){t.skin.css("padding"+n,m(t.padding[e]))}),s.trigger("onReady"),"inline"===o||"html"===o){if(!t.content||!t.content.length)return s._error("content")}else if(!r)return s._error("href");"image"===o?s._loadImage():"ajax"===o?s._loadAjax():"iframe"===o?s._loadIframe():s._afterLoad()},_error:function(e){n.extend(s.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width/s.opts.pixelRatio,s.coming.height=this.height/s.opts.pixelRatio,s._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,s._error("image")},e.src=s.coming.href,e.complete!==!0&&s.showLoading()},_loadAjax:function(){var e=s.coming;s.showLoading(),s.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){s.coming&&"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(t,n){"success"===n&&(e.content=t,s._afterLoad())}}))},_loadIframe:function(){var e=s.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(s.showLoading(),t.one("load",function(){n(this).data("ready",1),d||n(this).bind("load.fb",s.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),s._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||s._afterLoad()},_preloadImages:function(){var e=s.group,t=s.current,n=e.length,i=t.preload?Math.min(t.preload,n-1):0,r,o;for(o=1;i>=o;o+=1)r=e[(t.index+o)%n],"image"===r.type&&r.href&&((new Image).src=r.href)},_afterLoad:function(){var e=s.coming,t=s.current,i="fancybox-placeholder",r,o,a,l,c,d;if(s.hideLoading(),e&&s.isActive!==!1){if(!1===s.trigger("afterLoad",e,t))return e.wrap.stop(!0).trigger("onReset").remove(),void(s.coming=null);switch(t&&(s.trigger("beforeChange",t),t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),s.unbindEvents(),r=e,o=e.content,a=e.type,l=e.scrolling,n.extend(s,{wrap:r.wrap,skin:r.skin,outer:r.outer,inner:r.inner,current:r,previous:t}),c=r.href,a){case"inline":case"ajax":case"html":r.selector?o=n("<div>").html(o).find(r.selector):p(o)&&(o.data(i)||o.data(i,n('<div class="'+i+'"></div>').insertAfter(o).hide()),o=o.show().detach(),r.wrap.bind("onReset",function(){n(this).find(o).length&&o.hide().replaceAll(o.data(i)).data(i,!1)}));break;case"image":o=r.tpl.image.replace("{href}",c);break;case"swf":o='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+c+'"></param>',d="",n.each(r.swf,function(e,t){o+='<param name="'+e+'" value="'+t+'"></param>',d+=" "+e+'="'+t+'"'}),o+='<embed src="'+c+'" type="application/x-shockwave-flash" width="100%" height="100%"'+d+"></embed></object>"}p(o)&&o.parent().is(r.inner)||r.inner.append(o),s.trigger("beforeShow"),r.inner.css("overflow","yes"===l?"scroll":"no"===l?"hidden":l),s._setDimension(),s.reposition(),s.isOpen=!1,s.coming=null,s.bindEvents(),s.isOpened?t.prevMethod&&s.transitions[t.prevMethod]():n(".fancybox-wrap").not(r.wrap).stop(!0).trigger("onReset").remove(),s.transitions[s.isOpened?r.nextMethod:r.openMethod](),s._preloadImages()}},_setDimension:function(){var e=s.getViewport(),t=0,i=!1,r=!1,o=s.wrap,a=s.skin,l=s.inner,c=s.current,d=c.width,p=c.height,f=c.minWidth,h=c.minHeight,y=c.maxWidth,v=c.maxHeight,x=c.scrolling,w=c.scrollOutside?c.scrollbarWidth:0,b=c.margin,k=g(b[1]+b[3]),C=g(b[0]+b[2]),_,T,E,O,S,L,W,j,A,M,R,P,H,I,z;if(o.add(a).add(l).width("auto").height("auto").removeClass("fancybox-tmp"),_=g(a.outerWidth(!0)-a.width()),T=g(a.outerHeight(!0)-a.height()),E=k+_,O=C+T,S=u(d)?(e.w-E)*g(d)/100:d,L=u(p)?(e.h-O)*g(p)/100:p,"iframe"===c.type){if(I=c.content,c.autoHeight&&1===I.data("ready"))try{I[0].contentWindow.document.location&&(l.width(S).height(9999),z=I.contents().find("body"),w&&z.css("overflow-x","hidden"),L=z.outerHeight(!0))}catch(D){}}else(c.autoWidth||c.autoHeight)&&(l.addClass("fancybox-tmp"),c.autoWidth||l.width(S),c.autoHeight||l.height(L),c.autoWidth&&(S=l.width()),c.autoHeight&&(L=l.height()),l.removeClass("fancybox-tmp"));if(d=g(S),p=g(L),A=S/L,f=g(u(f)?g(f,"w")-E:f),y=g(u(y)?g(y,"w")-E:y),h=g(u(h)?g(h,"h")-O:h),v=g(u(v)?g(v,"h")-O:v),W=y,j=v,c.fitToView&&(y=Math.min(e.w-E,y),v=Math.min(e.h-O,v)),P=e.w-k,H=e.h-C,c.aspectRatio?(d>y&&(d=y,p=g(d/A)),p>v&&(p=v,d=g(p*A)),f>d&&(d=f,p=g(d/A)),h>p&&(p=h,d=g(p*A))):(d=Math.max(f,Math.min(d,y)),c.autoHeight&&"iframe"!==c.type&&(l.width(d),p=l.height()),p=Math.max(h,Math.min(p,v))),c.fitToView)if(l.width(d).height(p),o.width(d+_),M=o.width(),R=o.height(),c.aspectRatio)for(;(M>P||R>H)&&d>f&&p>h&&!(t++>19);)p=Math.max(h,Math.min(v,p-10)),d=g(p*A),f>d&&(d=f,p=g(d/A)),d>y&&(d=y,p=g(d/A)),l.width(d).height(p),o.width(d+_),M=o.width(),R=o.height();else d=Math.max(f,Math.min(d,d-(M-P))),p=Math.max(h,Math.min(p,p-(R-H)));w&&"auto"===x&&L>p&&P>d+_+w&&(d+=w),l.width(d).height(p),o.width(d+_),M=o.width(),R=o.height(),i=(M>P||R>H)&&d>f&&p>h,r=c.aspectRatio?W>d&&j>p&&S>d&&L>p:(W>d||j>p)&&(S>d||L>p),n.extend(c,{dim:{width:m(M),height:m(R)},origWidth:S,origHeight:L,canShrink:i,canExpand:r,wPadding:_,hPadding:T,wrapSpace:R-a.outerHeight(!0),skinSpace:a.height()-p}),!I&&c.autoHeight&&p>h&&v>p&&!r&&l.height("auto")},_getPosition:function(e){var t=s.current,n=s.getViewport(),i=t.margin,r=s.wrap.width()+i[1]+i[3],o=s.wrap.height()+i[0]+i[2],a={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&o<=n.h&&r<=n.w?a.position="fixed":t.locked||(a.top+=n.y,a.left+=n.x),a.top=m(Math.max(a.top,a.top+(n.h-o)*t.topRatio)),a.left=m(Math.max(a.left,a.left+(n.w-r)*t.leftRatio)),a},_afterZoomIn:function(){var e=s.current;e&&(s.isOpen=s.isOpened=!0,s.wrap.css("overflow","visible").addClass("fancybox-opened"),s.update(),(e.closeClick||e.nextClick&&s.group.length>1)&&s.inner.css("cursor","pointer").bind("click.fb",function(t){n(t.target).is("a")||n(t.target).parent().is("a")||(t.preventDefault(),s[e.closeClick?"close":"next"]())}),e.closeBtn&&n(e.tpl.closeBtn).appendTo(s.skin).bind("click.fb",function(e){e.preventDefault(),s.close()}),e.arrows&&s.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(s.outer).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&n(e.tpl.next).appendTo(s.outer).bind("click.fb",s.next)),s.trigger("afterShow"),e.loop||e.index!==e.group.length-1?s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play()):s.play(!1))},_afterZoomOut:function(e){e=e||s.current,n(".fancybox-wrap").trigger("onReset").remove(),n.extend(s,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),s.trigger("afterClose",e)}}),s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,n=e.orig,i={},r=50,o=50,a=e.hPadding,l=e.wPadding,c=s.getViewport();return!n&&e.isDom&&t.is(":visible")&&(n=t.find("img:first"),n.length||(n=t)),p(n)?(i=n.offset(),n.is("img")&&(r=n.outerWidth(),o=n.outerHeight())):(i.top=c.y+(c.h-o)*e.topRatio,i.left=c.x+(c.w-r)*e.leftRatio),("fixed"===s.wrap.css("position")||e.locked)&&(i.top-=c.y,i.left-=c.x),i={top:m(i.top-a*e.topRatio),left:m(i.left-l*e.leftRatio),width:m(r+l),height:m(o+a)}},step:function(e,t){var n,i,r,o=t.prop,a=s.current,l=a.wrapSpace,c=a.skinSpace;("width"===o||"height"===o)&&(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),s.isClosing&&(n=1-n),i="width"===o?a.wPadding:a.hPadding,r=e-i,s.skin[o](g("width"===o?r:r-l*n)),s.inner[o](g("width"===o?r:r-l*n-c*n)))},zoomIn:function(){var e=s.current,t=e.pos,i=e.openEffect,r="elastic"===i,o=n.extend({opacity:1},t);delete o.position,r?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===i&&(t.opacity=.1),s.wrap.css(t).animate(o,{duration:"none"===i?0:e.openSpeed,easing:e.openEasing,step:r?this.step:null,complete:s._afterZoomIn})},zoomOut:function(){var e=s.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),s.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:s._afterZoomOut})},changeIn:function(){var e=s.current,t=e.nextEffect,n=e.pos,i={opacity:1},r=s.direction,o=200,a;n.opacity=.1,"elastic"===t&&(a="down"===r||"up"===r?"top":"left","down"===r||"right"===r?(n[a]=m(g(n[a])-o),i[a]="+="+o+"px"):(n[a]=m(g(n[a])+o),i[a]="-="+o+"px")),"none"===t?s._afterZoomIn():s.wrap.css(n).animate(i,{duration:e.nextSpeed,easing:e.nextEasing,complete:s._afterZoomIn})},changeOut:function(){var e=s.previous,t=e.prevEffect,i={opacity:.1},r=s.direction,o=200;"elastic"===t&&(i["down"===r||"up"===r?"top":"left"]=("up"===r||"left"===r?"-":"+")+"="+o+"px"),e.wrap.animate(i,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},s.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:n("html"),create:function(e){e=n.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(s.coming?s.coming.parent:e.parent),this.fixed=!1,e.fixed&&s.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=n.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(o.bind("resize.overlay",n.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){return n(e.target).hasClass("fancybox-overlay")?(s.isActive?s.close():t.close(),!1):void 0}),this.overlay.css(e.css).show()},close:function(){var e,t;o.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(n(".fancybox-margin").removeClass("fancybox-margin"),e=o.scrollTop(),t=o.scrollLeft(),this.el.removeClass("fancybox-lock"),o.scrollTop(e).scrollLeft(t)),n(".fancybox-overlay").remove().hide(),n.extend(this,{overlay:null,fixed:!1})},update:function(){var e="100%",n;this.overlay.width(e).height("100%"),l?(n=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),a.width()>n&&(e=a.width())):a.width()>o.width()&&(e=a.width()),this.overlay.width(e).height(a.height())},onReady:function(e,t){var i=this.overlay;n(".fancybox-overlay").stop(!0,!0),i||this.create(e),e.locked&&this.fixed&&t.fixed&&(i||(this.margin=a.height()>o.height()?n("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1),e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var i,r;t.locked&&(this.margin!==!1&&(n("*").filter(function(){return"fixed"===n(this).css("position")&&!n(this).hasClass("fancybox-overlay")&&!n(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=o.scrollTop(),r=o.scrollLeft(),this.el.addClass("fancybox-lock"),o.scrollTop(i).scrollLeft(r)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!s.coming&&this.overlay.fadeOut(e.speedOut,n.proxy(this.close,this))}},s.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t=s.current,i=t.title,r=e.type,o,a;
if(n.isFunction(i)&&(i=i.call(t.element,t)),f(i)&&""!==n.trim(i)){switch(o=n('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+i+"</div>"),r){case"inside":a=s.skin;break;case"outside":a=s.wrap;break;case"over":a=s.inner;break;default:a=s.skin,o.appendTo("body"),l&&o.width(o.width()),o.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(g(o.css("margin-bottom")))}o["top"===e.position?"prependTo":"appendTo"](a)}}},n.fn.fancybox=function(e){var t,i=n(this),r=this.selector||"",o=function(o){var a=n(this).blur(),l=t,c,d;o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||a.is(".fancybox-wrap")||(c=e.groupAttr||"data-fancybox-group",d=a.attr(c),d||(c="rel",d=a.get(0)[c]),d&&""!==d&&"nofollow"!==d&&(a=r.length?n(r):i,a=a.filter("["+c+'="'+d+'"]'),l=a.index(this)),e.index=l,s.open(a,e)!==!1&&o.preventDefault())};return e=e||{},t=e.index||0,r&&e.live!==!1?a.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",o):i.unbind("click.fb-start").bind("click.fb-start",o),this.filter("[data-fancybox-start=1]").trigger("click"),this},a.ready(function(){var t,o;n.scrollbarWidth===i&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),i=t.innerWidth()-t.height(99).innerWidth();return e.remove(),i}),n.support.fixedPosition===i&&(n.support.fixedPosition=function(){var e=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=20===e[0].offsetTop||15===e[0].offsetTop;return e.remove(),t}()),n.extend(s.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")}),t=n(e).width(),r.addClass("fancybox-lock-test"),o=n(e).width(),r.removeClass("fancybox-lock-test"),n("<style type='text/css'>.fancybox-margin{margin-right:"+(o-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery);var currentTree;$(document).ready(function(){function e(t){var n="<li>"+t.name;if(t.children){n+="<ul>";for(var i=0;i<t.children.length;i++)n+=e(t.children[i]);n+="</ul>"}return n+="</li>"}var t={spinnerElmt:$("#tree-container"),start:function(){this.spinnerElmt.addClass("spinning").empty().spin()},stop:function(){this.spinnerElmt.removeClass("spinning").spin(!1)}},n=io.connect("http://localhost");n.on("tree complete",function(e){t.stop(),displayTree(e),currentTree=e,$("#download-tree").show()}),$("form").submit(function(e){e.preventDefault(),t.start(),$("#download-tree").hide(),n.emit("crawl request",$("input#site").val())}),$("#download-tree").click(function(t){t.preventDefault(),$.fancybox("<ul>"+e(currentTree)+"</ul>")})});
//# sourceMappingURL=./scripts.min.map